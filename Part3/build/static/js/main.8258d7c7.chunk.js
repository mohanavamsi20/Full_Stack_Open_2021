(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),a=t(3),o=t(1),u=t(0);var s=function(e){var n=e.id,t=e.name,r=e.number,c=e.deletePerson;return Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[t," ",r," ",Object(u.jsx)("button",{onClick:function(){return c(n,t)},children:"delete"})]})})};var i=function(e){var n=e.persons,t=e.foundPerson,r=e.searchedPerson,c=e.deletePerson;return Object(u.jsx)("div",{children:""===r?n.map((function(e){return Object(u.jsx)(s,{id:e.id,name:e.name,number:e.number,deletePerson:c},e.id)})):t.map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.number]},e.id)}))})};var d=function(e){var n=e.searchedPerson,t=e.handlePersonSearch;return Object(u.jsxs)("div",{children:["filter shown with: ",Object(u.jsx)("input",{onChange:t,value:n})]})};var l=function(e){var n=e.addPerson,t=e.handleNameChange,r=e.newName,c=e.handleNumberChange,a=e.newNumber;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:r,onChange:t})]}),Object(u.jsxs)("div",{children:["Numbers: ",Object(u.jsx)("input",{value:a,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},j=t(4),b=t.n(j),f="/api/persons",h={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))}},m=(t(38),function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1];Object(o.useEffect)((function(){h.getAll().then((function(e){r(e)}))}),[]);var c=Object(o.useState)(""),s=Object(a.a)(c,2),j=s[0],b=s[1],f=Object(o.useState)(""),m=Object(a.a)(f,2),O=m[0],v=m[1],p=Object(o.useState)(""),x=Object(a.a)(p,2),g=x[0],P=x[1],w=Object(o.useState)([]),N=Object(a.a)(w,2),S=N[0],C=N[1],y=Object(o.useState)(null),k=Object(a.a)(y,2),T=k[0],A=k[1],I=Object(o.useState)(null),D=Object(a.a)(I,2),E=D[0],J=D[1],L=Object(o.useState)(null),B=Object(a.a)(L,2),U=(B[0],B[1]),q=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"notify",children:n})},z=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"error",children:n})};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(q,{message:T}),Object(u.jsx)(z,{message:E}),Object(u.jsx)(d,{handlePersonSearch:function(e){P(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));C(n)},searchedPerson:g}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:j,number:O};if(!0===t.some((function(e){return e.name===j}))){var c=t.findIndex((function(e){return e.name===j})),a=t[c].id;!0===window.confirm("".concat(j," is already added to the Phonebook, replace the old number with a new one?"))&&(h.update(a,n).then((function(e){r(t.map((function(n){return n.id!==a?n:e})))})),A("Updated ".concat(j)),setTimeout((function(){A(null)}),5e3).catch((function(e){U({text:e.response.data.error,type:"error"}),setTimeout((function(){U(null)}),3e3)})),b(""),v(""))}else h.create(n).then((function(e){r(t.concat(e)),b(""),v("")})),A("Added ".concat(j)),setTimeout((function(){A(null)}),5e3).catch((function(e){U({text:e.response.data.error,type:"error"}),setTimeout((function(){U(null)}),3e3)})),b(""),v("")},handleNameChange:function(e){b(e.target.value)},newName:j,handleNumberChange:function(e){v(e.target.value)},newNumber:O}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(i,{persons:t,foundPerson:S,searchedPerson:g,deletePerson:function(e,n){var c=window.confirm("Delete ".concat(n,"?"));console.log(e),!0===c&&h.deletePerson(e).then((function(){r(t.filter((function(n){return n.id!==e}))),A("".concat(n," succesfully deleted")),setTimeout((function(){A(null)}),5e3)})).catch((function(c){J("Information of '".concat(n,"' has already been removed from server")),setTimeout((function(){J(null)}),5e3),r(t.filter((function(n){return n.id!==e})))}))}})]})});c.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.8258d7c7.chunk.js.map