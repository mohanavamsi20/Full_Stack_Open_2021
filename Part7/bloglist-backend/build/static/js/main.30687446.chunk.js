(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,n){e.exports=n(76)},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),l=n.n(c),o=n(41),u=n(18),i=n(3),s=n.n(i),m=n(6),p=n(7),d=function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),r=n[0],c=n[1];return[{type:e,value:r,onChange:function(e){c(e.target.value)}},function(){c("")}]},f=function(e){var t=e.createComment,n=e.blogID,a=e.blog,c=d("text"),l=Object(p.a)(c,2),o=l[0],u=l[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("blogID",n),console.log("comment",o.value),t(a,n,o.value),u()}},r.a.createElement("div",null,r.a.createElement("input",o)),r.a.createElement("button",{type:"submit"},"add comment")))},b=function(e){var t=e.notification;if(null===t.message)return null;var n={color:"error"===t.type?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return r.a.createElement("div",{style:n},t.message)},v=function(e){var t=e.blog,n=e.like,a=e.createComment,c=e.notification;return void 0===t?null:r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5}},r.a.createElement("div",{className:"name"},r.a.createElement("div",{className:"details"},r.a.createElement("h2",null,t.title," ",t.author),r.a.createElement(b,{notification:c}),r.a.createElement("a",{href:t.url},t.url),r.a.createElement("div",null,t.likes," likes",r.a.createElement("button",{onClick:function(){return n(t)}},"like")),r.a.createElement("div",null,"added by ",t.user.name),r.a.createElement("h4",null,"comments"),r.a.createElement(f,{createComment:a,blogID:t.id,blog:t}),0===t.comments.length?r.a.createElement("div",null,"No comments so far"):r.a.createElement("ul",null,t.comments.map(function(e){return r.a.createElement("li",{key:e.id},e.content)})))))},g=n(13),E=n.n(g),h="/api/blogs",w=null,y=function(){return{headers:{Authorization:w}}},k={getAll:function(){var e=Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(h);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(h,t,y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(m.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.put("".concat(h,"/").concat(t.id),t,y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(m.a)(s.a.mark(function e(t,n){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(h,"/").concat(t,"/comments"),n,y());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(m.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.delete("".concat(h,"/").concat(t.id),y());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){w="bearer ".concat(e)},destroyToken:function(){w=null}},O={getAll:function(){var e=Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},j={login:function(){var e=Object(m.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},x=function(e){var t=e.createBlog,n=d("text"),a=Object(p.a)(n,2),c=a[0],l=a[1],o=d("text"),u=Object(p.a)(o,2),i=u[0],s=u[1],m=d("text"),f=Object(p.a)(m,2),b=f[0],v=f[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"create new"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:c.value,author:i.value,url:b.value}),l(),s(),v()}},r.a.createElement("div",null,"title:",r.a.createElement("input",c)),r.a.createElement("div",null,"author:",r.a.createElement("input",i)),r.a.createElement("div",null,"url:",r.a.createElement("input",b)),r.a.createElement("button",{type:"submit"},"create")))},S=r.a.forwardRef(function(e,t){var n=Object(a.useState)(!1),c=Object(p.a)(n,2),l=c[0],o=c[1],u={display:l?"none":""},i={display:l?"":"none"},s=function(){o(!l)};return Object(a.useImperativeHandle)(t,function(){return{toggleVisibility:s}}),r.a.createElement("div",null,r.a.createElement("div",{style:u},r.a.createElement("button",{onClick:s},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement("button",{onClick:s},"cancel")))}),B=n(17),C=n(4),L=n(79),N=n(80),I=function(e){var t=e.handleSubmit,n=e.username,a=e.password;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"form-group"},"username",r.a.createElement("input",Object.assign({id:"username"},n,{reset:null}))),r.a.createElement("div",{className:"form-group"},"password",r.a.createElement("input",Object.assign({id:"password"},a,{reset:null}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))},T=function(e){var t={paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5};return r.a.createElement("div",null,r.a.createElement("h2",null,"Blogs"),r.a.createElement(b,{notification:e.notification}),r.a.createElement(S,{buttonLabel:"create new",ref:e.newBlogRef},r.a.createElement(x,{createBlog:e.createBlog})),e.blogs.sort(e.byLikes).map(function(e){return r.a.createElement("div",{key:e.id,style:t},r.a.createElement("div",{className:"name"},r.a.createElement(B.b,{to:"blogs/".concat(e.id)},e.title," ",e.author)))}))},A=function(e){var t=e.users.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(B.b,{to:"users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.blogs.length))});return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Blogs created")),t)))},D=function(e){var t=e.user;if(console.log(t),void 0===t)return null;return r.a.createElement("div",null,r.a.createElement("h2",null,t.name),r.a.createElement("h4",null,"added blogs"),r.a.createElement("ul",null,t.blogs.map(function(e){return r.a.createElement("li",{key:e.id},e.title)})))},R=function(){var e=d("text"),t=Object(p.a)(e,2),n=t[0],c=t[1],l=d("password"),i=Object(p.a)(l,2),f=i[0],g=i[1],E=Object(a.useState)([]),h=Object(p.a)(E,2),w=h[0],y=h[1],x=Object(a.useState)(null),R=Object(p.a)(x,2),J=R[0],U=R[1],V=Object(a.useState)([]),z=Object(p.a)(V,2),W=z[0],F=z[1],H=Object(a.useState)({message:null}),q=Object(p.a)(H,2),G=q[0],K=q[1];Object(a.useEffect)(function(){function e(){return(e=Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:t=e.sent,y(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),Object(a.useEffect)(function(){function e(){return(e=Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAll();case 2:t=e.sent,F(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),Object(a.useEffect)(function(){function e(){return(e=Object(m.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=window.localStorage.getItem("loggedBlogAppUser"))&&(n=JSON.parse(t),U(n),k.setToken(n.token));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";K({message:e,type:t}),setTimeout(function(){return K({message:null})},5e3)},P=function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Z.current.toggleVisibility(),e.prev=2,e.next=5,j.login({username:n.value,password:f.value});case 5:a=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(a)),k.setToken(a.token),U(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),M("wrong username of password","error");case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(m.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.create(t);case 2:n=e.sent,$.current.toggleVisibility(),y(w.concat(n)),M("a new blog ".concat(n.title," by ").concat(n.author," added"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(m.a)(s.a.mark(function e(t){var n,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(Object(u.a)({},t),{},{likes:t.likes+1}),e.next=3,k.update(n);case 3:a=e.sent,console.log(a),console.log(t.comments),r=Object(u.a)(Object(u.a)({},a),{},{user:t.user,comments:t.comments}),y(w.map(function(e){return e.id===t.id?r:e})),M("blog ".concat(r.title," by ").concat(r.author," liked!"));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(s.a.mark(function e(t,n,a){var r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("blogID",n),console.log("comment",a),e.next=4,k.addComment(n,{content:a});case 4:r=e.sent,console.log(r),c=Object(u.a)(Object(u.a)({},t),{},{comments:[].concat(Object(o.a)(t.comments),[r])}),y(w.map(function(e){return e.id===n?c:e})),M("New comment for blog ".concat(c.title," added!"));case 9:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),Z=r.a.createRef(),$=r.a.createRef(),_=function(e,t){return t.likes-e.likes},ee={paddingRight:5};return null===J?r.a.createElement("div",null,r.a.createElement("h2",null,"log in to application"),r.a.createElement(b,{notification:G}),r.a.createElement(S,{buttonLabel:"login",ref:Z},r.a.createElement(I,{handleSubmit:P,username:n,password:f}))):r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement("div",null,r.a.createElement(L.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(L.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(L.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(N.a,{className:"mr-auto"},r.a.createElement(N.a.Link,{href:"#",as:"span"},r.a.createElement(B.b,{style:ee,to:"/"},"blogs")),r.a.createElement(N.a.Link,{href:"#",as:"span"},r.a.createElement(B.b,{style:ee,to:"/users"},"users")),r.a.createElement(N.a.Link,{href:"#",as:"span"},J?r.a.createElement(r.a.Fragment,null,r.a.createElement("em",null,J.name," logged in")," ",r.a.createElement("button",{onClick:function(){U(null),k.destroyToken(),window.localStorage.removeItem("loggedBlogAppUser"),c(),g()}},"Logout")," "):r.a.createElement(B.b,{to:"/login"},"login"))))),r.a.createElement(C.a,{exact:!0,path:"/",render:function(){return r.a.createElement(T,{notification:G,newBlogRef:$,createBlog:Q,blogs:w,byLikes:_})}}),r.a.createElement(C.a,{exact:!0,path:"/blogs/:id",render:function(e){var t,n=e.match;return r.a.createElement(v,{blog:(t=n.params.id,w.find(function(e){return e.id===t})),notification:G,like:X,createComment:Y})}}),r.a.createElement(C.a,{exact:!0,path:"/users",render:function(){return r.a.createElement(A,{users:W})}}),r.a.createElement(C.a,{exact:!0,path:"/users/:id",render:function(e){var t,n=e.match;return r.a.createElement(D,{user:(t=n.params.id,W.find(function(e){return e.id===t}))})}}))))};l.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.30687446.chunk.js.map